(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(56)},32:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),l=a.n(o),i=(a(32),a(3)),s=a(4),c=a(6),u=a(5),m=a(7),d=(n.Component,a(58)),h=a(59),p=a(57),f=a(11),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._handleEmail=function(e){e.preventDefault(),a.setState({email:e.target.value})},a._handlePassword=function(e){e.preventDefault(),a.setState({password:e.target.value})},a._handleSubmit=function(e){e.preventDefault(),fetch("http://localhost:5000/api/login",{method:"POST",body:JSON.stringify({email:a.state.email,password:a.state.password}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e),window.localStorage.setItem("jwt",e.token),window.localStorage.setItem("username",e.username),window.localStorage.setItem("email",e.email),window.localStorage.setItem("userid",e.userid)}).then(function(){return a.props.history.push("/home")}).then(function(){return window.location.reload()}).catch(function(e){console.log("There has been a problem with your fetch operation: ",e.message)})},a.state={username:void 0,email:void 0,password:void 0,signUpError:"",SignInError:"",IsLoading:!0},a._handleSubmit=a._handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("jwt"),a=window.localStorage.getItem("username");window.localStorage.getItem("email");"undefined"!==t&&fetch("http://localhost:5000/api/verify?token="+t).then(function(e){return e.json}).then(function(n){n.success?e.setState({token:t,username:a}):e.setState({token:t,IsLoading:!1})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"wrapper fadeInDown"},r.a.createElement("div",{id:"formContent"},r.a.createElement("div",{className:"fadeIn first"}),r.a.createElement("form",{onSubmit:this._handleSubmit},r.a.createElement("input",{type:"text",id:"login",className:"fadeIn second",name:"login",placeholder:"login",ref:function(t){e.inputNode1=t},onChange:this._handleEmail.bind(this)}),r.a.createElement("input",{type:"password",id:"password",className:"fadeIn third passwordinput",name:"login",placeholder:"password",ref:function(t){e.inputNode2=t},onChange:this._handlePassword.bind(this)}),r.a.createElement("input",{type:"submit",className:"fadeIn fourth",value:"Log In"})),r.a.createElement("div",{id:"formFooter"},r.a.createElement("a",{className:"underlineHover",href:"#"},"Forgot Password?")),"Welcome, "+this.state.username))}}]),t}(n.Component),g=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={username:void 0,user:void 0},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("jwt"),a=window.localStorage.getItem("username");window.localStorage.getItem("email"),window.localStorage.getItem("userid");"undefined"!==t&&fetch("http://localhost:5000/api/verify?token="+t).then(function(e){return e.json()}).then(function(n){n.success?e.setState({token:t,username:a,user:"Welcome ,".concat(a)}):e.setState({token:t,IsLoading:!1})})}},{key:"signout",value:function(){var e=window.localStorage.getItem("jwt");"undefined"!==e&&fetch("http://localhost:5000/api/logout?token="+e).then(function(e){return e.json()}).then(function(e){e.success&&(localStorage.clear(),window.location.hash="home",window.location.reload())})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-dark navbarbg"},r.a.createElement("img",{style:{width:"200px",height:"100px"},src:"images/logo.png"}),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(p.a,{to:"/home",className:"navbar-brand"},"Home"))),r.a.createElement("span",{className:"navbar-text"},r.a.createElement("img",{style:{width:"30px",height:"30px"},src:"images/user.png"}),this.state.user?this.state.user+"|":null,this.state.user?r.a.createElement("a",{href:"#",onClick:this.signout,className:"navbar-brand"},"Logout"):r.a.createElement(p.a,{to:"/login",className:"navbar-brand"},"Login")),r.a.createElement(p.a,{to:"/signup",className:"navbar-brand"},"SignUp")))}}]),t}(n.Component),E=a(12),b=a.n(E),w=a(24),y=(a(35),[]),N=window.localStorage.getItem("userid"),j=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={restaurant:[],dishCategory:[],order:[],total:0,deliverycharges:5,params:[],message:""};a.props.match.params.restaurant;return fetch("http://localhost:5000/api/restaurant?id="+a.props.match.params.restaurant).then(function(e){return e.json()}).then(function(e){var t=[e],n=[];b.a.each(t,function(e,t){b.a.each(t,function(e,t){n.push(t)})}),a.setState({restaurant:[].concat(n)}),a.state.restaurant.map(function(e){y=e.Dishes.map(function(e){return e.type}).filter(function(e,t,a){return a.indexOf(e)===t})}),a.setState({dishCategory:y})}),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"addToCart",value:function(e){console.log(this.state.order.dishid);var t={userid:N,dishid:e._id,cost:e.cost,title:e.title};this.setState({order:[].concat(Object(w.a)(this.state.order),[t])}),this.setState({total:this.state.total+e.cost}),console.log(this.state.order)}},{key:"confirmOrder",value:function(){for(var e=[],t=[],a=0;a<=this.state.order.length-1;a++)e[a]=this.state.order[a].dishid,t[a]=this.state.order[a].cost;fetch("http://localhost:5000/api/order",{method:"POST",body:JSON.stringify({order_no:Math.random().toString(36).slice(2).toUpperCase()+Math.round(1e4*Math.random(1e3)),userId:N,dishId:e,cost:t,deliverycost:this.state.deliverycharges,deliveryaddress:this.inputNode1.value}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.success&&console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},this.state.restaurant.map(function(t){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{key:t._id+"moviediv",className:"row d-inline-block col-md-8"},r.a.createElement("h1",null,t.name),r.a.createElement("p",null,t.description),r.a.createElement("p",null,t.Address+t.city),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{key:t._id},r.a.createElement("img",{src:t.image,alt:t.name,className:"movieimg",key:"img"+t._id}))),e.state.dishCategory.map(function(a){return r.a.createElement("div",{className:"dishesdiv",key:a},r.a.createElement("h2",null,a),t.Dishes.filter(function(e){return e.type===a}).map(function(t){return r.a.createElement("div",null,r.a.createElement("div",{key:t._id},r.a.createElement("h3",null,t.title),r.a.createElement("p",null,t.description),r.a.createElement("p",null,t.cost+"$")),r.a.createElement("button",{onClick:function(){return e.addToCart(t)}},"Add"))}))})),r.a.createElement("div",{className:"col-md-4"},e.state.order.length>0?r.a.createElement("div",null,r.a.createElement("h3",null,"Order Details"),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"List"),r.a.createElement("th",null,"Cost")),e.state.order.map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.cost))}),r.a.createElement("tr",null,r.a.createElement("td",null,"Delivery Charges"),r.a.createElement("td",null,e.state.deliverycharges+"$")),r.a.createElement("tr",null,r.a.createElement("td",null,"Total"),r.a.createElement("td",null,e.state.total+e.state.deliverycharges+"$"))),r.a.createElement("form",{onSubmit:e.confirmOrder.bind(e)},r.a.createElement("label",null,"Enter Delivery Address"),r.a.createElement("input",{type:"textarea",placeholder:"Address",ref:function(t){e.inputNode1=t}}),r.a.createElement("button",null,"Confirm"),r.a.createElement("p",null,e.state.message))):null))}))}}]),t}(n.Component),S=function(e){function t(){var e;Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={restaurant:[]};return fetch("http://localhost:5000/api/restaurants").then(function(e){return e.json()}).then(function(t){var a=[t],n=[];b.a.each(a,function(e,t){b.a.each(t,function(e,t){n.push(t)})}),e.setState({restaurant:[].concat(n)})}),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.state.restaurant.map(function(e){return r.a.createElement("div",{key:e._id+"moviediv",className:"row d-inline-block"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(p.a,{to:"/restaurantinfo/"+e._id.toString(),className:"btn btn-light"},r.a.createElement("div",{key:e._id,className:"moviediv"},r.a.createElement("img",{src:e.image,alt:e.name,className:"movieimg",key:"img"+e._id})))))}))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._handleSubmit=function(e){e.preventDefault(),fetch("http://localhost:5000/api/user",{method:"POST",body:JSON.stringify({firstname:a.inputNode1.value,lastname:a.inputNode2.value,email:a.inputNode3.value,password:a.inputNode4.value}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.success&&(console.log("signed up"),fetch("http://localhost:5000/api/login",{method:"POST",body:JSON.stringify({email:a.inputNode3.value,password:a.inputNode4.value}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return console.log(e),a.setState({username:a.inputNode1.value}),window.localStorage.setItem("jwt",e.token)}))}).catch(function(e){console.log("There has been a problem with your fetch operation: ",e.message)})},a.state={username:void 0,email:void 0,password:void 0,signUpError:"",SignInError:"",IsLoading:!0},a._handleSubmit=a._handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("jwt");"undefined"!==t&&fetch("https://localhost:5000/api/verify?token="+t).then(function(e){return e.json}).then(function(a){a.success,e.setState({token:t,IsLoading:!1})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"wrapper fadeInDown"},r.a.createElement("div",{id:"formContent"},r.a.createElement("div",{className:"fadeIn first"}),r.a.createElement("form",{onSubmit:this._handleSubmit},r.a.createElement("label",null,"FirstName"),r.a.createElement("input",{type:"text",id:"firstName",className:"fadeIn second",name:"firstName",placeholder:"First name",ref:function(t){e.inputNode1=t}}),r.a.createElement("label",null,"LastName"),r.a.createElement("input",{type:"text",id:"lastName",className:"fadeIn second",name:"lastName",placeholder:"Last name",ref:function(t){e.inputNode2=t}}),r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",id:"login",className:"fadeIn second",name:"email",placeholder:"Email",ref:function(t){e.inputNode3=t}}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",id:"password",className:"fadeIn third passwordinput",name:"password",placeholder:"password",ref:function(t){e.inputNode4=t}}),r.a.createElement("input",{type:"submit",className:"fadeIn fourth",value:"Log In"})),r.a.createElement("div",{id:"formFooter"},r.a.createElement("a",{className:"underlineHover",href:"#"},"Forgot Password?"))))}}]),t}(n.Component),k=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Order Confirmation",this.props.match.params.order)}}]),t}(n.Component),I=r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(h.a,{exact:!0,path:"/home",component:S}),r.a.createElement(h.a,{exact:!0,path:"/login",component:v}),r.a.createElement(h.a,{exact:!0,path:"/signup",component:O}),r.a.createElement(h.a,{path:"/restaurantinfo/:restaurant",component:j}),r.a.createElement(h.a,{path:"/confirmorder/:order",component:k})));l.a.render(I,document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.55fbe9fe.chunk.js.map